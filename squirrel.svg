<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 600"
     preserveAspectRatio="xMidYMid meet" role="img" aria-labelledby="title desc">
  <title id="title">Squirrels swapping walnuts around a fixed walnut</title>
  <desc id="desc">
    A tree with a circular ring of holes. Three adjacent walnuts are highlighted and a curved double-headed arrow above them indicates
    the two outer walnuts swap around the middle walnut. Two squirrels stand near the bottom.
  </desc>

  <defs>
    <marker id="ah-end" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M0,0 L10,5 L0,10 Z" fill="rgba(0,0,0,0.88)"/>
    </marker>
    <marker id="ah-start" viewBox="0 0 10 10" refX="1" refY="5" markerWidth="6" markerHeight="6" orient="auto">
      <path d="M10,0 L0,5 L10,10 Z" fill="rgba(0,0,0,0.88)"/>
    </marker>

    <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="1.2" stdDeviation="1.2" flood-color="rgba(0,0,0,0.18)"/>
    </filter>
  </defs>

  <style>
    :root{
      --ink: rgba(0,0,0,0.88);
      --faint: rgba(0,0,0,0.22);

      --trunk: #8b5a2b;
      --canopy: #6fbf73;

      --hole: rgba(60,35,20,0.82);

      --nut: #c69c6d;
      --cap: #8b6a43;
      --accent: #a8b9ff;

      --sq1: #b48a63;
      --sq2: #a87a54;
    }

    .ink   { stroke: var(--ink); fill: none; stroke-width: 2.2; stroke-linecap: round; stroke-linejoin: round; }
    .faint { stroke: var(--faint); fill: none; stroke-width: 1.6; stroke-linecap: round; stroke-linejoin: round; }

    .ring  { stroke: rgba(0,0,0,0.16); fill: none; stroke-width: 1.6; }

    /* Evenly spaced holes: dotted stroke around the ring */
    .holes {
      fill: none;
      stroke: var(--hole);
      stroke-width: 4.8;          /* ~matches prior dot diameter */
      stroke-linecap: round;
      stroke-dasharray: 0.1 12.95; /* evenly spaced dots (â‰ˆ 96 dots around r=200) */
    }

    .trunk  { fill: var(--trunk);  stroke: var(--ink); stroke-width: 2.2; stroke-linecap: round; stroke-linejoin: round; }
    .canopy { fill: var(--canopy); stroke: var(--ink); stroke-width: 2.2; stroke-linecap: round; stroke-linejoin: round; }

    .nutBody { fill: var(--nut); stroke: var(--ink); stroke-width: 2.0; stroke-linecap: round; stroke-linejoin: round; }
    .nutCap  { fill: var(--cap); stroke: var(--ink); stroke-width: 2.0; stroke-linecap: round; stroke-linejoin: round; }
    .nutMid  { fill: var(--accent); stroke: var(--ink); stroke-width: 2.0; stroke-linecap: round; stroke-linejoin: round; }

    .sq1 { fill: var(--sq1); stroke: var(--ink); stroke-width: 2.2; stroke-linecap: round; stroke-linejoin: round; }
    .sq2 { fill: var(--sq2); stroke: var(--ink); stroke-width: 2.2; stroke-linecap: round; stroke-linejoin: round; }

    .swapArrow { stroke: var(--ink); fill: none; stroke-width: 2.7; stroke-linecap: round; stroke-linejoin: round; }

    .halo { fill: rgba(168,185,255,0.18); stroke: rgba(0,0,0,0.06); stroke-width: 1; }
  </style>

  <!-- Slight zoom to reduce top/bottom whitespace (safe, no clipping) -->
  <g transform="translate(0 -10) translate(300 320) scale(1.15) translate(-300 -320)">

    <!-- ===== Tree (center) ===== -->
    <g transform="translate(300,305)">
      <path class="trunk"
        d="M-18,90 C-10,40 -12,10 -24,-30
           C-30,-55 -18,-80 0,-85
           C18,-80 30,-55 24,-30
           C12,10 10,40 18,90" />
      <path class="faint" d="M-18,90 C-38,105 -55,108 -70,110" />
      <path class="faint" d="M18,90 C38,105 55,108 70,110" />

      <path class="canopy"
        d="M-95,-45 C-110,-95 -65,-135 -25,-125
           C-10,-165 60,-165 75,-120
           C130,-120 140,-55 110,-20
           C135,25 95,70 40,55
           C10,85 -50,75 -65,40
           C-110,35 -130,-15 -95,-45 Z" />

      <path class="faint" d="M-40,-95 C-25,-75 -10,-65 10,-60" />
      <path class="faint" d="M55,-90 C45,-70 25,-55 5,-50" />
      <path class="faint" d="M-70,-20 C-40,-5 -10,5 18,10" />
    </g>

    <!-- ===== Ring of holes (evenly spaced) ===== -->
    <g transform="translate(300,305)">
      <circle class="ring" cx="0" cy="0" r="200"/>
      <circle class="holes" cx="0" cy="0" r="200"/>
    </g>

    <!-- ===== Highlighted local swap (top-ish) ===== -->
    <g transform="translate(300,305)">
      <g transform="rotate(30)">
        <ellipse class="halo" cx="0" cy="-205" rx="70" ry="40"/>

        <g filter="url(#softShadow)">
          <g transform="translate(-26,-200)">
            <ellipse cx="0" cy="10" rx="11.3" ry="14.3" class="nutBody"/>
            <path d="M-12,4 C-2,-7 2,-7 12,4" class="nutCap"/>
            <path class="faint" d="M0,-8 C-1,-13 2,-15 6,-16" />
          </g>

          <g transform="translate(0,-200)">
            <ellipse cx="0" cy="10" rx="12.2" ry="15.2" class="nutMid"/>
            <path d="M-13,4 C-2,-7 2,-7 13,4" class="nutCap"/>
            <path class="faint" d="M0,-8 C-1,-13 2,-15 6,-16" />
          </g>

          <g transform="translate(26,-200)">
            <ellipse cx="0" cy="10" rx="11.3" ry="14.3" class="nutBody"/>
            <path d="M-12,4 C-2,-7 2,-7 12,4" class="nutCap"/>
            <path class="faint" d="M0,-8 C-1,-13 2,-15 6,-16" />
          </g>
        </g>

        <path class="swapArrow"
              marker-start="url(#ah-start)"
              marker-end="url(#ah-end)"
              d="M -26 -214 C -8 -292  8 -292  26 -214" />
      </g>
    </g>

    <!-- ===== Ground line ===== -->
    <path class="faint" d="M95 520 C185 505, 265 505, 300 510 C335 515, 415 525, 505 515" />

    <!-- ===== Left squirrel ===== -->
    <g transform="translate(130,446)">
      <path class="sq1"
        d="M-30,18
           C-88,2 -76,-52 -32,-34
           C-74,-80 8,-96 -10,-46
           C28,-72 62,-36 24,-6
           C62,18 18,40 -4,26" />

      <ellipse cx="0" cy="38" rx="28" ry="20" class="sq1"/>
      <path class="faint" d="M-8,32 C-14,44 -10,56 3,60" />

      <circle cx="18" cy="22" r="13" class="sq1"/>
      <path class="sq1" d="M9,12 L7,0 L18,10 Z" />
      <path class="sq1" d="M22,10 L27,-2 L31,14 Z" />

      <circle cx="22" cy="20" r="1.7" fill="rgba(0,0,0,0.88)"/>
      <circle cx="30" cy="28" r="1.2" fill="rgba(0,0,0,0.88)"/>
      <path class="ink" d="M30,28 C32,28 34,29 35,30" />
      <path class="faint" d="M31,31 C33,32 35,32 37,31" />
      <path class="faint" d="M26,27 C28,26 30,26 32,27" />

      <path class="ink" d="M9,44 C17,46 19,52 17,58" />
      <path class="ink" d="M1,46 C9,50 11,56 9,62" />
      <g transform="translate(26,58)">
        <ellipse cx="0" cy="7" rx="7.5" ry="9.5" class="nutBody"/>
        <path d="M-8,3 C-2,-3 2,-3 8,3" class="nutCap"/>
      </g>

      <path class="ink" d="M-12,56 C-18,62 -20,68 -18,74" />
      <path class="ink" d="M6,56 C2,64 5,70 10,74" />
      <ellipse class="ink" cx="-20" cy="76" rx="7" ry="3.2"/>
      <ellipse class="ink" cx="12" cy="76" rx="7" ry="3.2"/>
    </g>

    <!-- ===== Right squirrel ===== -->
    <g transform="translate(470,444)">
      <path class="sq2"
        d="M26,28
           C86,20 84,-40 38,-24
           C76,-66 10,-86 26,-40
           C-6,-60 -44,-30 -12,-10
           C-44,14 -6,46 12,30" />

      <ellipse cx="0" cy="40" rx="27" ry="19" class="sq2"/>
      <path class="faint" d="M6,32 C12,44 10,56 -2,60" />

      <circle cx="-18" cy="24" r="12.5" class="sq2"/>
      <path class="sq2" d="M-26,14 L-30,2 L-18,12 Z" />
      <path class="sq2" d="M-14,12 L-12,0 L-6,14 Z" />

      <circle cx="-22" cy="22" r="1.7" fill="rgba(0,0,0,0.88)"/>
      <circle cx="-34" cy="30" r="1.2" fill="rgba(0,0,0,0.88)"/>
      <path class="ink" d="M-34,30 C-36,30 -38,31 -39,32" />
      <path class="faint" d="M-35,33 C-37,34 -39,34 -41,33" />
      <path class="faint" d="M-28,29 C-30,28 -32,28 -34,29" />

      <path class="ink" d="M-6,46 C-16,48 -18,54 -16,60" />
      <path class="ink" d="M2,48 C-6,52 -8,58 -6,64" />

      <path class="ink" d="M-10,58 C-14,64 -12,70 -6,74" />
      <path class="ink" d="M10,58 C14,66 12,70 6,74" />
      <ellipse class="ink" cx="-8" cy="76" rx="7" ry="3.2"/>
      <ellipse class="ink" cx="8" cy="76" rx="7" ry="3.2"/>

      <path class="faint" d="M-52,6 C-44,-2 -36,10 -28,2" />
    </g>

  </g>
</svg>

